name: multi jobs demo
on:
  issues:
    types: [opened]  

jobs:
  prepare:
    runs-on: ubuntu-latest
    env:
      GREETING: "Hej"
      TARGET: "Alla"
    steps:
      - name: Sätt ihop meddelande
        id: prep
        run: |
          MSG="${GREETING}, ${TARGET}!"
          echo "message=$MSG" >> "$GITHUB_OUTPUT"
      - name: Visa secret maskerat
        env:
          TOKEN: ${{ secrets.API_TOKEN }}
        run: |
          echo "Token length: ${#TOKEN}"   

  consume:
    needs: prepare         # detta job körs först när "prepare" är klart
    runs-on: ubuntu-latest
    steps:
      - name: Använd output från första job
        run: echo "Received: ${{ needs.prepare.outputs.message }}"
  
